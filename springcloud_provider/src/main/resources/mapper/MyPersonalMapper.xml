<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jk.mapper.personal.mypersonaltree.MyPersonalMapper">
    <!--个人资料树-->
    <select id="queryTreeBeanBy" parameterType="int" resultType="com.jk.model.personal.mypersonaltree.MyPersonalTreeBean">
        select t.id,t.url,t.name,t.pid,t.menuIcon from t_mypersonaltree t where t.pid=#{value}
    </select>

    <!--个人资料 地址  -->
    <select id="findMyReside" resultType="com.jk.model.personal.myMaterial.MyResideBean">
        select t.id,t.surName,t.sex,t.areaReside,t.address,t.tel from t_myreside t
    </select>

    <!--删除个人地址-->
    <delete id="deleteMyReside" parameterType="int">
        delete from t_myreside where id= #{value}
    </delete>

    <!--新增地址-->
    <insert id="addMyReside" parameterType="com.jk.model.personal.myMaterial.MyResideBean">
        insert into t_myreside(surName,sex,areaReside,address,tel) values (#{surName},#{sex},#{areaReside},#{address},#{tel})
    </insert>

    <!--修改回显-->
    <select id="findUpdeMyResideById" parameterType="int" resultType="com.jk.model.personal.myMaterial.MyResideBean">
         select t.id,t.surName,t.sex,t.areaReside,t.address,t.tel from t_myreside t where t.id=#{value}
    </select>

    <!--修改地址upDateMyReside-->
    <update id="upDateMyReside" parameterType="com.jk.model.personal.myMaterial.MyResideBean">
        update t_myreside t set t.surName=#{surName},t.sex=#{sex},t.areaReside=#{areaReside},t.address=#{address},t.tel=#{tel} where t.id=#{id}
    </update>

    <!--查询个人资料-->
    <select id="findMyPersonal" resultType="com.jk.model.personal.myMaterial.MyPersonalBean" parameterType="int">
        select t.id,t.mytopimg,t.info from t_mypersonal t where t.id=#{value}
    </select>

    <!--修改个人资料-->
    <update id="upDatePersonal" parameterType="com.jk.model.personal.myMaterial.MyPersonalBean">
        update t_mypersonal t set t.mytopimg=#{mytopimg},t.info=#{info} where t.id=#{id}
    </update>

    <!--获取红包数-->
    <select id="findRedCount" resultType="int">
      select count(*) from t_myrednumber where userId=userId
    </select>

    <!--获取红包-->
    <insert id="upDateRed">
        insert  into t_myrednumber(redNumber,userId) values(#{redNumber},#{userId})
    </insert>

    <!--查询红包-->
    <select id="findRedNumber" parameterType="int" resultType="com.jk.model.personal.mypersonaltree.MyRedNumberBean">
        select t.redNumber from t_myrednumber t where t.userId=#{value}
    </select>

</mapper>